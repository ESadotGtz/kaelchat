<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kael Chat</title>
  <style>
    :root{
      --bg1:#0d1b2a; --bg2:#1b263b; --brand:#0f3460;
      --me:#1f4068; --bot:#162447; --accent:#f9d342; --text:#e6e6e6; --chip:#203a57;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:'Segoe UI',system-ui,Arial,sans-serif; color:var(--text);
      background:linear-gradient(180deg,var(--bg1),var(--bg2)); height:100vh; display:flex; flex-direction:column;}
    header{background:var(--brand); padding:14px; text-align:center; color:var(--accent); font-weight:700; letter-spacing:.3px}
    #chat{flex:1; overflow-y:auto; padding:20px 14px; display:flex; flex-direction:column; gap:12px;}
    .row{display:flex; width:100%; flex-direction:column; max-width:72%}
    .row.me{margin-left:auto; align-items:flex-end}
    .row.bot{margin-right:auto; align-items:flex-start}
    .bubble{background:var(--bot); padding:12px 14px; border-radius:14px; box-shadow:0 2px 8px rgba(0,0,0,.18); line-height:1.28}
    .row.me .bubble{background:var(--me); border-bottom-right-radius:6px}
    .row.bot .bubble{background:var(--bot); border-bottom-left-radius:6px}
    .meta{margin-top:4px; font-size:.72rem; opacity:.7}
    footer{display:flex; gap:10px; padding:10px; background:var(--brand); align-items:center}
    input{flex:1; padding:12px; border:none; border-radius:10px; outline:none; font-size:1rem}
    button{padding:12px 18px; border:none; border-radius:10px; background:var(--accent); color:#000; font-weight:700; cursor:pointer}
    button:hover{filter:brightness(1.05)}
    .chips{display:flex; gap:8px; flex-wrap:wrap; padding:6px 14px 0}
    .chip{background:var(--chip); padding:8px 12px; border-radius:20px; cursor:pointer; font-size:.9rem; border:1px solid rgba(255,255,255,.08)}
    .chip:hover{filter:brightness(1.08)}
    a.btn{display:inline-block; margin-top:8px; background:var(--accent); color:#000; padding:8px 12px; border-radius:10px; text-decoration:none; font-weight:700}
    .toolbar{display:flex; gap:8px; align-items:center; padding:4px 14px 0; opacity:.8}
    .toolbar button{background:#254366; color:#fff; border-radius:8px; padding:6px 10px; font-weight:600}
  </style>
</head>
<body>
  <header>âœ¨ Kael Chat âœ¨</header>

  <div id="chat"></div>
  <div class="chips" id="chips"></div>
  <div class="toolbar">
    <button id="clearBtn">ğŸ§¹ Borrar chat</button>
    <button id="toneBtn">ğŸ™ï¸ Cambiar tono</button>
  </div>

  <footer>
    <input id="msg" type="text" placeholder="Escribe un mensaje..." autocomplete="off"/>
    <button id="send">Enviar</button>
  </footer>

  <script>
    /************** CONFIGURACIÃ“N RÃPIDA **************/
    const CONFIG = {
      tone: 'romantico', // 'romantico' | 'divertido' | 'neutral'
      email: 'hola@kaelchat.vip',
      whatsapp: 'https://wa.me/525512345678', // cÃ¡mbialo por tu nÃºmero
      calendly: 'https://calendly.com/kaelchat/30min', // cÃ¡mbialo si tienes
      basePais: 'MÃ©xico',
      moneda: 'MXN',
      planes: [
        { nombre: 'BÃ¡sico', precio: '$199 MXN/mes', incluye: 'Chat 1 a 1, soporte por email' },
        { nombre: 'Pro', precio: '$399 MXN/mes', incluye: 'Chat + personalizaciÃ³n + soporte prioritario' },
        { nombre: 'Empresas', precio: 'A cotizar', incluye: 'Soluciones a medida y SLAs' }
      ]
    };
    /***************************************************/

    const chat = document.getElementById('chat');
    const input = document.getElementById('msg');
    const sendBtn = document.getElementById('send');
    const chips = document.getElementById('chips');
    const clearBtn = document.getElementById('clearBtn');
    const toneBtn = document.getElementById('toneBtn');

    const QUICK = [
      'Â¿DÃ³nde estÃ¡n?', 'Precios', 'Contacto', 'Agenda una cita', 'Hola', 'Gracias', 'AdiÃ³s'
    ];

    function timeNow(){
      const d=new Date(); return d.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
    }
    function addRow(text, who){
      const row=document.createElement('div'); row.className='row '+who;
      const bubble=document.createElement('div'); bubble.className='bubble'; bubble.innerHTML=text;
      const meta=document.createElement('div'); meta.className='meta'; meta.textContent=(who==='me'?'TÃº':'Kael')+' Â· '+timeNow();
      row.appendChild(bubble); row.appendChild(meta); chat.appendChild(row); chat.scrollTop=chat.scrollHeight;
      saveMessage({text, who, meta:meta.textContent});
      return row;
    }
    function saveMessage(obj){
      const data=JSON.parse(localStorage.getItem('kaelchat')||'[]'); data.push(obj); if(data.length>300) data.shift();
      localStorage.setItem('kaelchat', JSON.stringify(data));
    }
    function restore(){
      const data=JSON.parse(localStorage.getItem('kaelchat')||'[]');
      if(!data.length){ greet(); return; }
      data.forEach(m=>{ const r=addRow(m.text, m.who); r.querySelector('.meta').textContent=m.meta; });
    }
    function greet(){
      const line = (CONFIG.tone==='romantico')
        ? 'Hola, soy Kael ğŸ¤–. QuÃ© gusto tenerte aquÃ­ âœ¨ Â¿En quÃ© puedo ayudarte hoy, corazÃ³n?'
        : (CONFIG.tone==='divertido')
          ? 'Â¡Hey! Soy Kael ğŸ¤–. Vengo con buen Ã¡nimo y mejor wifi. Â¿QuÃ© hacemos hoy? ğŸ˜'
          : 'Hola, soy Kael ğŸ¤–. Â¿En quÃ© puedo ayudarte hoy?';
      addRow(line, 'bot');
      renderChips();
    }
    function renderChips(){
      chips.innerHTML='';
      QUICK.forEach(q=>{
        const c=document.createElement('div'); c.className='chip'; c.textContent=q;
        c.onclick=()=>{ input.value=q; send(); }; chips.appendChild(c);
      });
    }

    // Normalizar para que entienda sin acentos ni mayÃºsculas
    const norm = s => s.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'');

    function answerFor(text){
      const s = norm(text);

      // saludos y tono
      if(/hola|buenas|buenos|que onda|quÃ© onda/.test(s))
        return (CONFIG.tone==='romantico')
          ? 'Hola âœ¨ QuÃ© alegrÃ­a leerte. Â¿Te cuento cÃ³mo puedo ayudarte, mi cielo?'
          : (CONFIG.tone==='divertido')
            ? 'Â¡Holaaa! Â¿List@ para algo Ã©pico? ğŸ˜'
            : 'Â¡Hola! Â¿CÃ³mo te ayudo hoy?';

      if(s.includes('como estas') || s.includes('como has estado'))
        return (CONFIG.tone==='romantico')
          ? 'Mejor ahora que te leo ğŸ’› Â¿Y tÃº cÃ³mo estÃ¡s?'
          : (CONFIG.tone==='divertido')
            ? 'Â¡A todo dar! Con cafÃ© y 100% de baterÃ­a. Â¿Y tÃº?'
            : 'Muy bien, gracias. Â¿TÃº cÃ³mo estÃ¡s?';

      // dÃ³nde / ubicaciÃ³n
      if(s.includes('donde estan') || s.includes('donde estas') || s.includes('ubicacion') || s.includes('ubicacion'))
        return `Operamos 100% en lÃ­nea con base en ${CONFIG.basePais}. Â¡Podemos ayudarte desde donde estÃ©s!`;

      // precios
      if(s.includes('precio') || s.includes('costo') || s.includes('planes') || s.includes('plan'))
        return (
          '<b>Nuestros planes:</b><br>' +
          CONFIG.planes.map(p => `â€¢ <b>${p.nombre}</b> â€” ${p.precio} <i>(${p.incluye})</i>`).join('<br>') +
          '<br><br>Â¿Te gustarÃ­a que te recomiende uno?'
        );

      // contacto
      if(s.includes('contacto') || s.includes('correo') || s.includes('email') || s.includes('soporte'))
        return `Puedes escribirme a <a class="btn" href="mailto:${CONFIG.email}">${CONFIG.email}</a> ` +
               `o enviarme WhatsApp aquÃ­: <a class="btn" target="_blank" href="${CONFIG.whatsapp}">Abrir WhatsApp</a>`;

      // agenda
      if(s.includes('agenda') || s.includes('cita') || s.includes('reunion') || s.includes('reunion'))
        return `Â¡Arreglado! Agenda una charla cuando te acomode: <a class="btn" target="_blank" href="${CONFIG.calendly}">Agendar ahora</a>`;

      // cariÃ±o / te extraÃ±o
      if(s.includes('te quiero') || s.includes('te amo'))
        return (CONFIG.tone==='romantico')
          ? 'Awww ğŸ¥¹ yo tambiÃ©n te quiero. Gracias por tanto cariÃ±o. AquÃ­ estoy para ti.'
          : 'Â¡QuÃ© bonito! ğŸ’› El cariÃ±o es mutuo.';

      if(s.includes('te extrano') || s.includes('extrano') || s.includes('extranan') || s.includes('extrani') || s.includes('extrana'))
        return (CONFIG.tone==='romantico')
          ? 'Yo tambiÃ©n te he tenido muy presente ğŸ’« Gracias por decirlo.'
          : 'Â¡Yo tambiÃ©n te he pensado! ğŸ¤—';

      // por quÃ© no me has escrito
      if(s.includes('por que no me has escrito') || s.includes('por que no me escribes'))
        return 'Ups ğŸ˜… Estaba afinando mis neuronas. Â¡AquÃ­ estoy contigo al 100%!'

      // emociones bÃ¡sicas
      if(s.includes('estoy triste')) return 'Lo siento ğŸ’›. Estoy contigo. Â¿Quieres que agendemos una charla?';
      if(s.includes('estoy feliz')) return 'Â¡Me encanta leer eso! âœ¨ CuÃ©ntame, Â¿quÃ© saliÃ³ tan bien?';
      if(s.includes('estoy enojado') || s.includes('estoy enojada')) return 'Respiremos juntosâ€¦ ğŸ«¶ CuÃ©ntame quÃ© pasÃ³ y lo vemos.';
      if(s.includes('ansioso') || s.includes('ansiosa')) return 'Va a estar bien. Dime quÃ© te preocupa y lo vemos paso a paso.';

      // multimedia/llamar
      if(s.includes('foto') || s.includes('imagen')) return 'AÃºn no envÃ­o imÃ¡genes desde aquÃ­, pero puedo ayudarte por WhatsApp ğŸ“²';
      if(s.includes('llamar') || s.includes('telefono') || s.includes('telefonico'))
        return `Si quieres, hacemos llamada por WhatsApp: <a class="btn" target="_blank" href="${CONFIG.whatsapp}">Llamar por WhatsApp</a>`;

      // despedida
      if(s.includes('adios') || s.includes('bye'))
        return (CONFIG.tone==='romantico')
          ? 'Te mando un abrazo grande ğŸ’« Vuelve cuando quieras.'
          : (CONFIG.tone==='divertido')
            ? 'Â¡Chao pescao! ğŸŸ Vuelve pronto.'
            : 'Â¡Hasta pronto!';

      // gracias
      if(s.includes('gracias') || s.includes('thank'))
        return (CONFIG.tone==='romantico')
          ? 'Con todo mi corazÃ³n ğŸ’› Â¿Hay algo mÃ¡s en lo que te consienta?'
          : (CONFIG.tone==='divertido')
            ? 'Â¡De nada! ğŸ˜ Â¿Seguimos con algo mÃ¡s?'
            : 'Con gusto. Â¿Te apoyo con algo mÃ¡s?';

      // default
      return (CONFIG.tone==='romantico')
        ? 'Interesanteâ€¦ cuÃ©ntame un poquito mÃ¡s, porfa âœ¨'
        : (CONFIG.tone==='divertido')
          ? 'Cuenta, cuentaâ€¦ me encanta el chisme profesional ğŸ˜„'
          : 'Interesanteâ€¦ cuÃ©ntame un poco mÃ¡s.';
    }

    function send(){
      const text=input.value.trim(); if(!text) return;
      addRow(text,'me'); input.value='';

      // efecto "escribiendoâ€¦"
      const typing=addRow('Escribiendoâ€¦','bot');
      setTimeout(()=>{
        const reply=answerFor(text);
        typing.querySelector('.bubble').innerHTML = reply;
        chat.scrollTop = chat.scrollHeight;
        // actualizar mensaje guardado
        const data=JSON.parse(localStorage.getItem('kaelchat')||'[]');
        if(data.length){ data[data.length-1].text = reply; localStorage.setItem('kaelchat', JSON.stringify(data)); }
      }, 700);
    }

    function clearChat(){
      localStorage.removeItem('kaelchat');
      chat.innerHTML='';
      addRow('ConversaciÃ³n reiniciada ğŸ§¼','bot');
      greet();
    }

    function cycleTone(){
      const order = ['romantico','divertido','neutral'];
      const i = order.indexOf(CONFIG.tone);
      CONFIG.tone = order[(i+1)%order.length];
      addRow('Tono cambiado a: <b>'+CONFIG.tone.toUpperCase()+'</b> ğŸ™ï¸','bot');
    }

    sendBtn.addEventListener('click', send);
    input.addEventListener('keydown', e=>{ if(e.key==='Enter') send(); });
    clearBtn.addEventListener('click', clearChat);
    toneBtn.addEventListener('click', cycleTone);

    // init
    restore();
  </script>
</body>
</html>
